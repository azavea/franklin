<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>0005-release-versioning · Franklin</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="# 5. Release versioning"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="0005-release-versioning · Franklin"/><meta property="og:type" content="website"/><meta property="og:url" content="https://azavea.github.io/franklin/"/><meta property="og:description" content="# 5. Release versioning"/><meta property="og:image" content="https://azavea.github.io/franklin/img/franklin-logo-tagline.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://azavea.github.io/franklin/img/franklin-logo-tagline.svg"/><link rel="shortcut icon" href="/franklin/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-970854-35', 'auto');
              ga('send', 'pageview');
            </script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto|Roboto+Condensed:400,700&amp;display=swap"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/franklin/js/scrollSpy.js"></script><link rel="stylesheet" href="/franklin/css/main.css"/><script src="/franklin/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/franklin/"><img class="logo" src="/franklin/img/header.png" alt="Franklin"/></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/franklin/docs/introduction" target="_self">Getting Started</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">0005-release-versioning</h1></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="5-release-versioning"></a><a href="#5-release-versioning" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5. Release versioning</h1>
<p>Date: 2021-08-03</p>
<h2><a class="anchor" aria-hidden="true" id="status"></a><a href="#status" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Status</h2>
<p>Accepted</p>
<h2><a class="anchor" aria-hidden="true" id="context"></a><a href="#context" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Context</h2>
<p>To this point Franklin has been publishing un-versioned container images. This
process has continued over several STAC and STAC API specification versions,
rounds of feedback from users, bugfixes for things I accidentally broke while
&quot;making things better,&quot; and versions of extension handling. After all of this,
without a notion of a &quot;release,&quot; to start versoining releases.</p>
<p>Traditionally, Azavea's projects have used <em>semantic versioning</em>. This has
always been a bit confusing in the application (rather than library) setting.
The question of &quot;breaking&quot; changes is more difficult -- Franklin isn't a library
consumed by other in-language programs, but an application consumed by anything
that speaks HTTP and JSON. If a client and Franklin are wrong in the same way,
and then we fix it, is that a breaking change or a bug fix?</p>
<p>The purpose of this ADR is to decide on and justify the choice for a specific
versioning scheme.</p>
<p>This ADR will discuss semantic versioning, date versioning (like <a href="https://hub.docker.com/r/minio/minio/tags?page=1&amp;ordering=last_updated">MinIO</a>), and
&quot;browser versioning&quot; (a continuously increasing integer).</p>
<h3><a class="anchor" aria-hidden="true" id="semantic-versioning"></a><a href="#semantic-versioning" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Semantic versioning</h3>
<p>&quot;Semantic versioning&quot; has been our default in a lot of settings. It's also the
<a href="https://github.com/radiantearth/stac-spec#current-version-and-branches">versioning scheme used by STAC</a>. This kind of consistency seems appealing. In
practice, our semantic versioning efforts in the past have been not quite
semantic, and they've been a bit confusing for applications.</p>
<p>For example, <a href="https://github.com/raster-foundry/raster-foundry/blob/develop/CHANGELOG.md">Raster Foundry</a> has been in the 1.x series for over three years,
despite changes in required parameters and outright removal of some
functionality. The entire change in GroundWork's CHANGELOG (repository is
private) that indicated it was 1.0.0 time was &quot;Promoted 0.51.3 to 1.0.0 --
released campaigns.&quot; It's easier to tell in <code>stac4s</code> what a breaking change is,
but for Franklin it's pretty challenging.</p>
<p>Is an application breaking change anything that adds a migration? Any upgrade to
<code>stac4s</code> that changes the shape of JSON? A change in required headers? A change
in behavior of some headers (for example, <a href="https://github.com/azavea/franklin/issues/781">allowing an asterisk in If-Match</a>)?
We've never had answers to these questions, and I think &quot;ad hoc move to 1.0,
then never move to 2.0&quot; has been a pretty normal experience.</p>
<h3><a class="anchor" aria-hidden="true" id="date-versioning"></a><a href="#date-versioning" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Date versioning</h3>
<p>Date versioning is a versioning scheme in which releases are tagged with their
date to some precision. In <a href="https://hub.docker.com/r/minio/minio/tags?page=1&amp;ordering=last_updated">MinIO</a>'s case that's down to the minute, and this
discussion will assume the same precision.</p>
<p>Date versioning makes no promises about visibility of breaking changes. The only
indication of the gap between version x and version y under date versioning is
how far apart they are in time. This means that as maintainers we <em>must</em> publish
good release notes (a CHANGELOG would help with some of this) and <em>must</em> publish
good migration guides for large version changes.</p>
<p>It's always easy in this case to determine the next version number -- it's
<em>right now</em> in UTC as an ISO8601 string without a timezone. That makes the
mechanics of doing releases really straightforward and probably 100%
automatable. It's hard in this case for a user to tell if an upgrade is safe for
them in the absence of the supporting documentation mentioned above.</p>
<h3><a class="anchor" aria-hidden="true" id="browser-versioning"></a><a href="#browser-versioning" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>&quot;Browser versioning&quot;</h3>
<p>This term comes from discussion with other Azaveans of versioning schemes -- no
one had a specific word for it, but we thought of it as &quot;what Chrome and Firefox
do,&quot; where there's a number that always goes up and it's not obvious what
anything means. For example, my current Firefox is on version 90.0.2 and Chrome
is 92.0.4515.107. <a href="https://www.chromium.org/developers/version-numbers">Chrome's versioning</a> has a decent amount of flexibility for
Chromium developers:</p>
<blockquote>
<p>MAJOR and MINOR may get updated with any significant Google Chrome release
(Beta or Stable update). MAJOR must get updated for any backwards incompatible
user data change (since this data survives updates).</p>
</blockquote>
<p>Firefox doesn't appear to have much public documentation about their release
process, except that it's <a href="https://support.mozilla.org/en-US/questions/896705">rapid now</a> and is, if you squint, kind of like date
versioning if you want to do some math with six-week increments.</p>
<p>In this case, versions aren't quite semantic, but there's still some notion of
&quot;big changes&quot; vs. &quot;little changes&quot; vs. bug fixes.</p>
<h2><a class="anchor" aria-hidden="true" id="decision"></a><a href="#decision" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Decision</h2>
<p>Franklin will choose date versioning. Semantic versioning can lead to false
confidence, and historically speaking it's hard for applications (though the
Chromium versioning advice offers a useful heuristic -- invalidation of old data
is <em>always major</em>). Browser versioning might trick people into thinking the
versions are semantic while still requiring the supporting documentation. Date
versioning is honest about the information it presents -- release x was Tuesday
at 3pm UTC, and release y was Thursday at 7pm UTC. Changelog maintenance and
release announcements will mitigate the information that SemVer purports to
offer, and bundling the changelog and a release announcement into the docs site
that's already built in CI will keep the overall maintenance burden manageable.</p>
<h2><a class="anchor" aria-hidden="true" id="consequences"></a><a href="#consequences" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Consequences</h2>
<p>Several tasks come out of this decision. We'll need to:</p>
<ul>
<li>create a CHANGELOG</li>
<li>add a <code>release-announcements/</code> directory that gets published somewhere
reasonable as part of the docs site publication workflow</li>
<li>christen the first release <code>2021-09-02T18:00:00</code> when it's ready 🎉</li>
</ul>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#status">Status</a></li><li><a href="#context">Context</a><ul class="toc-headings"><li><a href="#semantic-versioning">Semantic versioning</a></li><li><a href="#date-versioning">Date versioning</a></li><li><a href="#quot-browser-versioning-quot">&quot;Browser versioning&quot;</a></li></ul></li><li><a href="#decision">Decision</a></li><li><a href="#consequences">Consequences</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/franklin/" class="nav-home"><img src="/franklin/img/footer.png" alt="Franklin" width="66" height="58"/></a><div><h5>Other Projects</h5><a href="https://rasterfoundry.azavea.com">Raster Foundry</a><a href="https://rastervision.io">Raster Vision</a><a href="https://geotrellis.io">GeoTrellis</a></div><div><h5>Contribute</h5><a href="https://github.com/azavea/franklin">GitHub</a></div><div></div></section><a href="https://www.azavea.com/blog/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/franklin/img/azavea_white_solo.svg" alt="Azavea" width="170" height="45"/></a><section class="copyright">Copyright © 2022 Azavea</section></footer></div></body></html>